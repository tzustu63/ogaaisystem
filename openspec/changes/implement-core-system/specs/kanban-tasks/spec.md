## ADDED Requirements

### Requirement: 任務卡片管理
系統 SHALL 管理 Kanban 任務卡片，包含基本資訊、戰略對齊、任務類型、證據管理、風險合規等欄位。

#### Scenario: 建立任務卡片
- **WHEN** 使用者建立新任務
- **THEN** 系統要求填寫必填欄位：任務名稱、負責人、截止日期、優先級、類型
- **AND** 系統允許填寫選填欄位：任務描述、協作者、關聯KR、關聯Initiative、影響KPI、附件、風險標記

#### Scenario: 戰略對齊強制規則
- **WHEN** 使用者建立專案類型任務
- **THEN** 系統強制要求關聯至少一個 Initiative 或 KR
- **AND** 系統在未關聯時顯示錯誤訊息並阻止建立

#### Scenario: 標記影響 KPI
- **WHEN** 使用者標記任務為「影響 KPI」
- **THEN** 系統要求選擇會影響的 KPI
- **AND** 系統在任務完成時強制要求填寫「實際影響說明」

### Requirement: 看板視圖
系統 SHALL 提供標準看板視圖與自訂分組功能，支援拖曳改變任務狀態。

#### Scenario: 標準看板視圖
- **WHEN** 使用者查看看板
- **THEN** 系統顯示標準泳道：待處理、進行中、待審核、已完成
- **AND** 系統允許拖曳任務卡片改變狀態
- **AND** 系統在狀態變更時記錄稽核軌跡

#### Scenario: 自訂分組
- **WHEN** 使用者選擇自訂分組
- **THEN** 系統允許依單位分組
- **AND** 系統允許依專案分組
- **AND** 系統允許依優先級分組

#### Scenario: 任務篩選
- **WHEN** 使用者使用篩選功能
- **THEN** 系統允許依 Initiative 篩選
- **AND** 系統允許依類型篩選
- **AND** 系統允許依風險標記篩選
- **AND** 系統允許依負責人篩選

### Requirement: 任務完成自動更新
系統 SHALL 在任務完成時自動更新關聯的 KR 進度，並處理影響 KPI 的記錄。

#### Scenario: 自動更新 KR 進度
- **WHEN** 關聯到 KR 的任務完成
- **THEN** 系統自動重新計算 KR 進度
- **AND** 系統更新 Initiative 整體進度
- **AND** 系統在 KR 達成時發送通知

#### Scenario: 記錄實際影響
- **WHEN** 標記為「影響 KPI」的任務完成
- **THEN** 系統強制要求填寫「實際影響說明」
- **AND** 系統允許上傳佐證資料
- **AND** 系統記錄影響時間與負責人

### Requirement: 任務證據管理
系統 SHALL 支援任務附件的上傳、管理與檢視，並支援結構化表單紀錄。

#### Scenario: 上傳附件
- **WHEN** 使用者為任務上傳附件
- **THEN** 系統支援多種檔案格式（文件、圖片、連結）
- **AND** 系統檢查檔案大小與格式限制
- **AND** 系統記錄上傳時間與上傳人

#### Scenario: 表單紀錄
- **WHEN** 使用者填寫結構化表單紀錄
- **THEN** 系統根據任務類型顯示對應表單
- **AND** 系統驗證必填欄位
- **AND** 系統儲存表單資料供後續查詢

